<!doctype html>
<html>
    <head>
        <title>JSON Minifier</title>
        <style>
            * {
                box-sizing: border-box;
            }
            html,
            body {
                margin: 0;
                height: 100%;
                font-family: "Segoe UI", sans-serif;
                background: #f5f7fa;
            }

            nav {
                background: #1f2937;
                padding: 1em 2em;
                display: flex;
                justify-content: space-between;
                align-items: center;
                color: white;
            }

            .nav-left {
                font-size: 1.25em;
                font-weight: bold;
            }

            .nav-right {
                display: flex;
                gap: 1em;
            }

            .nav-right a {
                color: white;
                text-decoration: none;
                font-weight: bold;
                padding: 0.5em 1em;
                border-radius: 6px;
            }

            .nav-right a.active {
                background-color: #10b981;
            }

            h1 {
                margin: 0;
                text-align: center;
                padding: 1em;
                background: #10b981;
                color: white;
            }

            form {
                display: flex;
                height: calc(100% - 160px);
                padding: 1em;
                gap: 1em;
            }

            .panel {
                flex: 1;
                display: flex;
                flex-direction: column;
            }

            label {
                font-weight: bold;
                margin-bottom: 0.5em;
            }

            textarea,
            pre {
                flex: 1;
                padding: 1em;
                font-family: monospace;
                font-size: 1em;
                border: 1px solid #ccc;
                border-radius: 8px;
                resize: none;
                background: white;
            }

            pre {
                background: #f3f4f6;
                overflow: auto;
            }

            .btn-wrap {
                margin-top: 1em;
            }

            button {
                padding: 0.7em 1.5em;
                background-color: #10b981;
                color: white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-weight: bold;
            }

            button:hover {
                background-color: #059669;
            }

            @media (max-width: 768px) {
                form {
                    flex-direction: column;
                }
            }
        </style>
    </head>
    <body>
        <nav>
            <div class="nav-left">JSON Minifier</div>
            <div class="nav-right">
                <a href="/beautify">Beautify</a>
                <a href="/minify" class="active">Minify</a>
            </div>
        </nav>

        <form id="minify-form">
            <div class="panel">
                <label for="pretty">Beautified JSON:</label>
                <textarea
                    id="pretty"
                    placeholder='{\n  "key": "value"\n}'
                ></textarea>
                <div class="btn-wrap">
                    <button type="submit">Minify</button>
                </div>
            </div>
            <div class="panel">
                <label for="minified-result">Minified JSON:</label>
                <pre id="minified-result"></pre>
            </div>
        </form>

        <script>
            document.getElementById("minify-form").onsubmit = async function (
                e,
            ) {
                e.preventDefault();
                const raw = document.getElementById("pretty").value;
                const response = await fetch("/minify", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ raw }),
                });
                const data = await response.json();
                document.getElementById("minified-result").textContent =
                    data.minified || data.error;
            };
        </script>
    </body>
</html>
